# 医学用語整形 テストサンプル

## サンプル1：基本的な変換

### 入力テキスト
```
15才の男児が来院。アプガールスコアは9点でした。
エコー検査を実施したところ、異常所見は認められませんでした。
抗生剤を投与しました。
痙攣が認められました。
家族にご説明していただきました。
```

### 期待される出力
```
15歳の男児が来院。Apgarスコアは9点でした。
超音波検査を実施したところ、異常所見は認められませんでした。
抗菌薬を投与しました。
けいれんが認められました。
家族に説明した。
```

## サンプル2：人名由来の病名

### 入力テキスト
```
ファロー四徴症と診断された。
グラム染色を行ったところ、グラム陽性球菌を認めた。
Chédiak higashi症候群の可能性を考慮。
Henoch Schönlein紫斑病の診断に至った。
```

### 期待される出力
```
Fallot四徴症と診断された。
Gram染色を行ったところ、グラム陽性球菌を認めた。
Chédiak-Higashi症候群の可能性を考慮。
IgA血管炎の診断に至った。
```

## サンプル3：検査名の変換

### 入力テキスト
```
レントゲン写真を撮影した。
エコー検査を実施。
採血を行うと、炎症反応の上昇を認めた。
レントゲンを撮影。
```

### 期待される出力
```
X線検査を撮影した。
超音波検査を実施。
血液検査を行うと、炎症反応の上昇を認めた。
X線検査を撮影。
```

## サンプル4：年齢表記とひらがな表記

### 入力テキスト
```
6ヶ月の乳児が来院。
15才男子。
一旦、すべての検査を行った。
出来る限り早急に対応した。
```

### 期待される出力
```
6か月の乳児が来院。
15歳男子。
いったん、すべての検査を行った。
できる限り早急に対応した。
```

## サンプル5：文章表現と敬語

### 入力テキスト
```
3週間前より症状が出現。
家族にご説明していただき、同意を得た。
AとBとが併存していた。
A,B,Cが陽性だった。
```

### 期待される出力
```
3週前から症状が出現。
家族に説明し、同意を得た。
A、Bおよびが併存していた。
A、BおよびCが陽性だった。
```

## サンプル6：医学用語の表記

### 入力テキスト
```
奇形を認めた。
先天性の異常を認めた。
Escherichia coliが検出された。
遺伝子変異を認めた。
```

### 期待される出力
```
先天異常を認めた。
先天性の異常を認めた。
*Escherichia coli*が検出された。
遺伝子変異を認めた。
（注：学名はイタリック表記、実際の実装ではレンダリング時にイタリック体で表示）
```

## サンプル7：特殊記号と動植物名

### 入力テキスト
```
PHは7.40だった。
µg/mLで測定した。
実験で犬を使用した。
ヒト細胞を培養した。
```

### 期待される出力
```
pHは7.40だった。
µg/mLで測定した。
実験でイヌを使用した。
ヒト細胞を培養した。
```

## サンプル8：感情表現の検出（エラー）

### 入力テキスト
```
無念だったが、治療を継続した。
残念ながら、改善が見られなかった。
```

### 期待される出力
```
[エラー：感情表現「無念」が含まれています]
[エラー：感情表現「残念」が含まれています]

（整形は行われるが、エラーが返される）
```

## サンプル9：複合的なケース

### 入力テキスト
```
生後6ヶ月の男児。アプガールスコアは8点。
エコー検査を実施し、異常を認めた。
抗生剤を投与。3週間前より発熱。
家族にご説明していただいた。
痙攣が認められ、一旦、すべての検査を実施した。
PH7.40、Escherichia coli陽性。
```

### 期待される出力
```
生後6か月の男児。Apgarスコアは8点。
超音波検査を実施し、異常を認めた。
抗菌薬を投与。3週前から発熱。
家族に説明した。
けいれんが認められ、いったん、すべての検査を実施した。
pH7.40、*Escherichia coli*陽性。
```

## テスト時の注意点

1. **文脈の考慮**
   - 「人」→「ヒト」の変換は、医学的な文脈でのみ適用されるべき
   - 一般的な文脈（「患者は人です」など）では変換しない

2. **既に正しい表記**
   - 既に正しい表記の場合は変更しない
   - 例：「Apgar」はそのまま維持

3. **一貫性**
   - 同じ語は一貫して同じ表記を使用
   - 一度変換した語は、他の箇所でも同じ変換を適用

4. **エラーハンドリング**
   - 不正な入力（null、undefined等）の処理
   - 非常に長いテキストの処理

5. **パフォーマンス**
   - 大量のテキストを処理する場合の時間
   - リアルタイム整形の応答性

## 実装時のチェックリスト

- [ ] すべてのサンプルが正しく変換されるか
- [ ] エラー検出が正しく動作するか
- [ ] パフォーマンスが許容範囲内か
- [ ] エラーハンドリングが適切か
- [ ] UIでの表示が分かりやすいか
- [ ] ユーザーが元に戻せるか（undo機能）


